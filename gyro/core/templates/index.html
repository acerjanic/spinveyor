{% extends 'layouts/base.html' %}

{% block title %} Dashboard {% endblock title %}

<!-- Specific CSS goes HERE -->
{% block stylesheets %}{% endblock stylesheets %}

{% block content %}

      <!-- End Navbar -->
      <div class="panel-header panel-header-lg">
        <canvas id="bigDashboardChart"></canvas>
      </div>

      <div class="content">
        <!--
        <div class="row">
          <div class="col-lg-4">
            <div class="card card-chart">
              <div class="card-header">
                <h5 class="card-category">Global Sales</h5>
                <h4 class="card-title">Shipped Products</h4>
                <div class="dropdown">
                  <button type="button" class="btn btn-round btn-outline-default dropdown-toggle btn-simple btn-icon no-caret" data-toggle="dropdown">
                    <i class="now-ui-icons loader_gear"></i>
                  </button>
                  <div class="dropdown-menu dropdown-menu-right">
                    <a class="dropdown-item" href="#">Action</a>
                    <a class="dropdown-item" href="#">Another action</a>
                    <a class="dropdown-item" href="#">Something else here</a>
                    <a class="dropdown-item text-danger" href="#">Remove Data</a>
                  </div>
                </div>
              </div>
              <div class="card-body">
                <div class="chart-area">
                  <canvas id="lineChartExample"></canvas>
                </div>
              </div>
              <div class="card-footer">
                <div class="stats">
                  <i class="now-ui-icons arrows-1_refresh-69"></i> Just Updated
                </div>
              </div>
            </div>
          </div>
          <div class="col-lg-4 col-md-6">
            <div class="card card-chart">
              <div class="card-header">
                <h5 class="card-category">2018 Sales</h5>
                <h4 class="card-title">All products</h4>
                <div class="dropdown">
                  <button type="button" class="btn btn-round btn-outline-default dropdown-toggle btn-simple btn-icon no-caret" data-toggle="dropdown">
                    <i class="now-ui-icons loader_gear"></i>
                  </button>
                  <div class="dropdown-menu dropdown-menu-right">
                    <a class="dropdown-item" href="#">Action</a>
                    <a class="dropdown-item" href="#">Another action</a>
                    <a class="dropdown-item" href="#">Something else here</a>
                    <a class="dropdown-item text-danger" href="#">Remove Data</a>
                  </div>
                </div>
              </div>
              <div class="card-body">
                <div class="chart-area">
                  <canvas id="lineChartExampleWithNumbersAndGrid"></canvas>
                </div>
              </div>
              <div class="card-footer">
                <div class="stats">
                  <i class="now-ui-icons arrows-1_refresh-69"></i> Just Updated
                </div>
              </div>
            </div>
          </div>
          <div class="col-lg-4 col-md-6">
            <div class="card card-chart">
              <div class="card-header">
                <h5 class="card-category">Email Statistics</h5>
                <h4 class="card-title">24 Hours Performance</h4>
              </div>
              <div class="card-body">
                <div class="chart-area">
                  <canvas id="barChartSimpleGradientsNumbers"></canvas>
                </div>
              </div>
              <div class="card-footer">
                <div class="stats">
                  <i class="now-ui-icons ui-2_time-alarm"></i> Last 7 days
                </div>
              </div>
            </div>
          </div>
        </div>
        -->
        <div class="row">
          <div class="col-md-4">
            <div class="card">
              <div class="card-header ">
                <h5 class="card-category">User info</h5>
                <h4 class="card-title">Studies</h4>
              </div>
              <div class="card-body ">
                <div class="table table-responsive">
                  <table class="table">
                    <thead class=" text-primary">
                      <th class= "text-left">
                        Name
                      </th>
                      <th class = "text-center">
                        Short Name
                      </th>
                      <th class = "text-right">
                        Recon Protocol
                      </th>
                    </thead>
                    <tbody>
                    {% if study_list %}
                      {% for study in study_list %}
                      <tr>
                        <td class="text-left">
                           {{ study.name }}
                        </td>
                        <td class="text-center">
                           {{ study.slug }}
                        </td>
                        <td class="text-right">
                           {{ study.recon_protocol }}
                        </td>
                      </tr>
                      {% endfor %}
                      {% endif %}
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
          <div class="col-md-8">
            <div class="card">
              <div class="card-header">
                <h5 class="card-category">Last 5 recons for current user</h5>
                <h4 class="card-title"> Recon List </h4>
              </div>
              <div class="card-body">
                <div class="table-responsive">
                  <table class="table">
                    <thead class=" text-primary">
                      <th>
                        Study
                      </th>
                      <th>
                        Subject ID
                      </th>
                      <th>
                        Date/Time
                      </th>
                      <th>
                        Status
                      </th>
                      <th class="text-right">
                        Last Updated
                      </th>
                    </thead>
                    <tbody>
                    {% if user_recon_list %}
                    {% for recon in user_recon_list %}
                      <tr>
                        <td>
                          {{ recon.study }}
                        </td>
                        <td>
                          {{ recon.subject_id }}
                        </td>
                        <td>
                          {{ recon.created_at }}
                        </td>
                        {% if recon.status == "Complete"%}
                        <td> <span class="badge badge-success"> {{ recon.status }} </span></td>
                        {% elif recon.status == "Running"%}
                        <td> <span class="badge badge-info"> {{ recon.status }} </span></td>
                        {% elif recon.status == "Warning"%}
                        <td <span class="badge badge-warning"> {{ recon.status }} </span></td>
                        {% elif recon.status == "Error"%}
                        <td <span class="badge badge-danger"> {{ recon.status }} </span></td>
                        {% else %}
                        <td> {{ recon.status }} </td>
                        {% endif %}
                        <td class="text-right">
                          {{ recon.status_changed }}
                        </td>
                      </tr>
                    {% endfor %}
                    {% endif %}
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

{% endblock content %}

<!-- Specific JS goes HERE --> 
{% block javascripts %}

<script>
  $(document).ready(function() {
    // Javascript method's body can be found in assets/js/demos.js
    demo.initDashboardPageCharts();

  });
</script>

{% endblock javascripts %}
